<!DOCTYPE html>
<html>
    <body>
        <input type="file" id="Img">
        <button id="upload">Upload</button>

        <script type="module" src="./js/module.js"></script>
        <script type="module">
            import {getImages, uploadImages} from "./js/storage_module.js";
            import {updateToDatabase, isUserSignedIn} from "./js/module.js";

            document.getElementById("upload").addEventListener("click",uploadImage);

            async function uploadImage(){
                var uid = await isUserSignedIn();
                var file = document.getElementById("Img").files[0];
                //console.log(file);
                var upload = await uploadImages(uid,file);
                //console.log(upload);
                var url = await getImages(upload);
                //console.log(url);
                var prop = "users/" + uid;
                var dt = {profile_picture:url};
                updateToDatabase(prop,dt);
            }
            
        </script>
    </body>
</html>