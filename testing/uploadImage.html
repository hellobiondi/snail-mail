<!DOCTYPE html>
<html>
    <body>
        <input type="file" id="Img">
        <button id="upload">Upload</button>
        <img id="myimg">

        <script type="module" src="module.js"></script>
        <script type="module">
            import {getImages, uploadImages} from "./storage_module.js";
            import {updateToDatabase, isUserSignedIn} from "./module.js";

            document.getElementById("upload").addEventListener("click",uploadImage);

            async function uploadImage(){
                var uid = await isUserSignedIn();
                var file = document.getElementById("Img").files[0];
                var filename = file.name;
                console.log(filename);
                var upload = await uploadImages(uid,file,filename);
                console.log(upload);
                var url = await getImages(upload);
                console.log(url);
                var prop = "users/" + uid;
                var dt = {profile_picture:url};
                updateToDatabase(prop,dt);
            }
            
        </script>
    </body>
</html>