<!doctype html>
<html lang="en" class="h-100">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="Sun Jun, Mindy, Biondi, Wei Hern, Gadman">
	<meta name="generator" content="Hugo 0.84.0">
	<title>Snail Mail Â· Sure and Steady</title>

	<!-- Bootstrap CSS File -->
	<link href="./bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- using CDN -->
    <script src="https://unpkg.com/vue@next"></script>

	<!-- Stylesheet for Page -->
	<link href="./css/main.css" rel="stylesheet">
	<style>
		.homeRow{
			padding-bottom: 10px;
			padding-top: 30px;
		}
		.tab {
			display: inline-block;
			margin-left: 40px;
		}
	</style>
</head>

<body>
	<!-- using Navbar -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">
				<img src="./img/snail.PNG" alt="" width=35" height="35" class="d-inline-block align-text-top"> Snail Mail
			</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu"
				aria-controls="navbarMenu" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse justify-content-end" id="navbarMenu">
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link active" aria-current="page" href="#">About Us</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Features</a>
					</li>
				</ul>
				<button class="btn btn-outline-dark" type="submit">Log In / Sign Up</button>
			</div>
		</div>
	</nav>

	<div id=app class="container">
		<div class="row-md ">
			<h3 class="homeRow"> Recently Received:</h3>
		</div>
		<div class="row d-inline-flex">	
			<div class="col" v-for='(name,idx) in unopen_list'>
				<h6>From: {{ name }}</h6>
				<img src="./img/envelope.png" style="width: 4rem;"class="card-img-top" alt="...">
				<a href="#mail-header">
					<button @click="update_mail(idx)" class="btn btn-cta btn-lg px-4 me-md-2">Open</button>
				</a>
			</div>
		</div>

		<div class="row-md d-flex" id="mail-header">
			<h3 class="homeRow"> Mail: From - {{ mail_name }}</h3>
		</div>
		<div id="mail_chat" class="row-md d-flex justify-content-center">
			<div class='card col-sm-2 ' v-bind:style="{display:display}" >
				<img class='.bg-image img-fluid m-auto mh-100' style="width: 50rem;height:100vh;"  src='./img/postcard1.jpg'>
				
				<div class="card-img-overlay overflow-auto">
					<h5 class="card-title">Chats</h5>
					<div class="row " v-for="(name,idx) in chat_history.slice().reverse()" @click=open_chat(idx)>
						<p class="m-auto">
							{{ name }}
						</p>
						<img class="w-50" src="./img/envelopeclose.png">
						
					</div>
				</div>
			</div>
			
			<div class="card col-md-8">
				<img class="card-img img-fluid m-auto" style="width: 50rem;height:100vh;" src="./img/postcard1.jpg" alt="Card image">
				<div class="card-img-overlay overflow-auto">
					<h5 class="card-title">Subject: {{ subject }}</h5>
					
					<p class="card-text"><span class="tab"></span>
						{{ body }}
					</p>
					<div class="position-absolute bottom-0 end-0">
						<button type="button" class="btn btn-cta btn-lg px-4 m-4" @click="reply()" aria-label="Reply">Reply</button>
					</div>
				</div>
			</div>
		</div>

		<div class="row-md d-block">
			<h3 class="homeRow"> Chat History:</h3>
		</div>
		<div class="row d-inline-flex" >
			<div class="col text-center" v-for='(chat ,idx) in chats' >
				<a href="#mail-header" @click="display_chat(idx)">
					<img src="./img/envelopemulti.png" style="width: 8rem;"class="card-img-top" alt="...">
				</a>
				<h6>{{ chat }}</h6>
			</div>
		</div>

	</div>
</body>

<script src="https://unpkg.com/vue@next"></script>
<script>

	var json_axios = {
		names: ['Sun','Moon','Sky'],
		chats: ['Sun','Moon','Sky','Sea','Hell'],
		chat_history: ['chat1','chat2','chat3','chat4','chat5']
	}
	var temp_note = `When we click on open, the content will change to the mail. As for
					Chat history, it will allow user to chose all their letters that have 
					been send or received on the left side. New mail and reply mail will have the same format.
					All containers and row are flexible for different screen size. 
					Envelope image of received will change after being opened (This will be checked during backend aspect)
					
					Note to self: Missing chat history, Missing reply button & send new,
					processing of text-content, getting database value and looping it, 
					backend aspect of updating values, scrollable content for row if exceed certain content length value.
					Nav Bar for chat history??`

	Vue.createApp(
		{
			data(){
				return {
					// data_base should be updated via axios method
					data_base: json_axios,
					unopen_list: json_axios.names,
					subject: "I LOVE WAD I LOVE WAD I LOVE WAD1",
					body: temp_note,
					mail_name: '',
					chats: json_axios.chats,
					display:'none',
					chat_history: json_axios.chat_history
				}	
			},

			methods: {
				update_mail(idx){
					this.subject = "using the name go further into json to retrieve subject"
					this.body = this.unopen_list[idx]
					this.mail_name = this.unopen_list[idx]
					// TO:DO use the name to get newest body content from json. 

				},
				display_chat(idx){
					this.display = "inline-flex"
					this.mail_name =  this.chats[idx]
					this.open_chat(0)
					
				},
				open_chat(idx){
					this.subject = "use the chat name to find subject and body"
					this.body = this.chat_history[idx];
				},
				update_mail_status(){
					//To do and return database value.
				},
				reply(){
					alert("To be completed")
				}
			}

		}
	).mount("#app")
</script>

<!-- Bootstrap JS File -->
<script src="./bootstrap/js/bootstrap.min.js"></script>

</html>